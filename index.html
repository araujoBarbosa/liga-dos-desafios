<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Liga dos Desafios</title>

  <!-- Firebase inline module antes do script principal -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getDatabase, ref, set, onValue, push, onChildAdded
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";
    import {
      getStorage, ref as sRef, uploadBytes, getDownloadURL
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBgjvQiI9fTVqR8rflZJod9ZYa_7snlyMw",
      authDomain: "liga-dos-desafios.firebaseapp.com",
      databaseURL: "https://liga-dos-desafios-default-rtdb.firebaseio.com",
      projectId: "liga-dos-desafios",
      storageBucket: "liga-dos-desafios.firebasestorage.app",
      messagingSenderId: "656853224486",
      appId: "1:656853224486:web:15019345b8649b838daae7"
    };

    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const storage = getStorage(app);

    // Torna global para o script.js acessar
    window.db = db;
    window.storage = storage;
  </script>
  <!-- script.js como mÃ³dulo (carregado corretamente) -->
  <script type="module" src="script.js"></script>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="img/icon-192.png">
  <meta name="theme-color" content="#7c3aed">
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</head>

<body>
  <div class="app">

    <!-- CABEÃ‡ALHO -->
    <header class="app-header">
      <div class="app-header-main">
        <div class="logo-badge">ğŸ†</div>
        <div class="titulo-app">
          <h1>Liga dos Desafios</h1>
          <span>Temporada 1 â€¢ FamÃ­lias & Times</span>
        </div>
      </div>

      <div class="app-header-right">
        <div class="pill-temporada">
          <span>Progresso</span> â€¢ <strong id="headerProgresso">0%</strong>
        </div>
        <div class="avatar-mini" id="avatarTopo">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
      </div>
    </header>

    <!-- CONTEÃšDO PRINCIPAL -->
    <!-- TELA DE LOGIN -->
    <section id="screen-login" class="screen active tela-login">
      <div class="background-particles">
        <div class="particle" style="top:20%; left:10%; animation-delay:0s;"></div>
        <div class="particle" style="top:60%; left:80%; animation-delay:2s;"></div>
        <div class="particle particle-orange" style="top:75%; left:30%; animation-delay:1s;"></div>
        <div class="particle" style="top:40%; left:60%; animation-delay:3s;"></div>
        <div class="particle particle-orange" style="top:15%; left:75%; animation-delay:0.5s;"></div>
      </div>

      <div class="login-container">

        <div class="login-logo">
          ğŸ†
        </div>

        <h1 class="login-titulo">Entre para a Liga</h1>
        <p class="login-sub">Prepare-se para a temporada mais Ã©pica.</p>

        <!-- Avatar Selection -->
        <div class="avatar-scroll">
          <div class="avatar-item">ğŸ‘¨â€ğŸ’¼</div>
          <div class="avatar-item">ğŸ‘©â€ğŸ¦°</div>
          <div class="avatar-item">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
          <div class="avatar-item">ğŸ¾</div>
          <div class="avatar-item">ğŸ®</div>
          <div class="avatar-item">ğŸ”¥</div>
        </div>

        <input id="inputNome" type="text" placeholder="Digite seu nome..." />
        <input id="inputSenha" type="password" placeholder="Digite a senha do acesso..." />

        <button id="btnEntrarLogin" class="btn-login">
          Entrar na Liga âš¡
        </button>

      </div>
    </section>

    <main class="app-main">


      <!-- TELA TIME -->
      <section id="screen-time" class="screen">
        <div class="titulo-section">
          <span>Entrar ou criar um time</span>
          <small>Passo 1 de 2</small>
        </div>

        <p class="texto-suave">
          Este Ã© um protÃ³tipo visual com campos simulados. No app real, estes dados seriam salvos no servidor.
        </p>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>ğŸ‘¥</span>
              <div>
                <div class="card-title">Entrar em um time existente</div>
                <div class="card-subtitle">Use o cÃ³digo enviado por alguÃ©m.</div>
              </div>
            </div>
          </div>
          <div class="campo">
            <label for="codigoTime">CÃ³digo do time</label>
            <input id="codigoTime" type="text" placeholder="Ex: X7F9K2" />
          </div>
          <button class="btn btn-secundario btn-block">
            Entrar no time (visual)
          </button>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>â­</span>
              <div>
                <div class="card-title">Criar um novo time</div>
                <div class="card-subtitle">Ideal para sua famÃ­lia ou grupo de amigos.</div>
              </div>
            </div>
          </div>

          <div class="campo">
            <label for="nomeTime">Nome do time</label>
            <input id="nomeTime" type="text" value="FamÃ­lia Barbosa" />
          </div>

          <button class="btn btn-principal btn-block" id="btnContinuarDashboard">
            Ir para o painel do time
          </button>
        </div>
      </section>

      <!-- TELA DASHBOARD -->
      <section id="screen-dashboard" class="screen">
        <div class="titulo-section">
          <span id="tituloTimePainel">Time: FamÃ­lia Barbosa</span>
          <small>VisÃ£o geral</small>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>ğŸ“Š</span>
              <div>
                <div class="card-title">Progresso na temporada</div>
                <div class="card-subtitle">
                  Acompanhe desafios concluÃ­dos e pontos acumulados.
                </div>
              </div>
            </div>
            <span class="pill pontos" id="pillPontosTotais">0 pts</span>
          </div>

          <div class="progresso-wrapper">
            <div class="progresso-barra">
              <div class="progresso-preenchido" id="barraProgresso"></div>
            </div>
            <div class="progresso-texto">
              <span id="textoDesafiosConcluidos">0 / 20 desafios</span>
              <span id="textoPercentualProgresso">0%</span>
            </div>
          </div>

          <div class="grid-mini-cards">
            <div class="mini-card">
              <span class="icone">ğŸ†</span>
              <strong>PosiÃ§Ã£o no ranking</strong>
              <small>2Âº lugar (exemplo visual)</small>
            </div>
            <div class="mini-card">
              <span class="icone">ğŸ¯</span>
              <strong>Desafio atual</strong>
              <small id="miniDesafioAtual">#1 Foto engraÃ§ada com o pet</small>
            </div>
            <div class="mini-card">
              <span class="icone">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
              <strong>Membros</strong>
              <small>4 pessoas no time (visual)</small>
            </div>
          </div>


        </div>

        <!-- CHAT GLOBAL -->
        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>ğŸ’¬</span>
              <div>
                <div class="card-title">Chat global da Liga</div>
                <div class="card-subtitle">
                  Todos os times podem conversar aqui em tempo real.
                </div>
              </div>
            </div>
            <span class="badge-status" id="badgeStatusChat">Modo local</span>
          </div>

          <div class="chat-container">
            <div class="chat-mensagens" id="chatMensagens"></div>

            <div class="chat-input-area">
              <input id="chatInput" type="text" placeholder="Digite uma mensagem para todos..." autocomplete="off" />
              <button id="btnAudio" class="btn-audio">ğŸ¤</button>
              <button id="chatEnviar">â¤</button>
            </div>

            <div class="chat-info-usuario">
              <span id="chatUsuarioInfo"></span>
            </div>
          </div>
        </div>
      </section>

      <!-- TELA DESAFIOS (Desafio Atual) -->
      <section id="screen-desafios" class="screen">

        <div class="titulo-section">
          <span>Desafio Atual</span>
          <small id="contadorDesafios">1 / 20</small>
        </div>

        <div class="card" id="cardDesafioAtual">

          <div class="card-header">
            <div class="card-title-row">
              <span id="emojiAtual">ğŸ¯</span>
              <div>
                <div class="card-title" id="tituloDesafioAtual">Carregando...</div>
                <div class="card-subtitle" id="nivelDesafioAtual"></div>
              </div>
            </div>
            <span class="pill pontos" id="pontosDesafioAtual">0 pts</span>
          </div>

          <p class="texto-suave" id="descricaoDesafioAtual"></p>

          <div class="chips-linha" id="chipsDesafioAtual"></div>

          <div class="area-envio">
            <strong>Envio da prova</strong>
            <p>Envie uma foto ou vÃ­deo para concluir este desafio.</p>
            <div class="area-envio-botoes">
              <button class="btn btn-secundario" id="btnEnviarFoto">ğŸ“¸ Foto</button>
              <button class="btn btn-secundario" id="btnEnviarVideo">ğŸ¥ VÃ­deo</button>
            </div>
          </div>

          <div style="margin-top:12px;">
            <strong>Status do time:</strong>
            <ul id="statusMembros" class="texto-suave"></ul>
          </div>

        </div>

      </section>

      <!-- TELA DETALHE -->
      <section id="screen-detalhe-desafio" class="screen">
        <div class="titulo-section">
          <span id="detalheTituloCurto">Desafio</span>
          <small id="detalheNumero">#?</small>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span id="detalheEmoji">ğŸ¯</span>
              <div>
                <div class="card-title" id="detalheTitulo"></div>
                <div class="card-subtitle" id="detalheNivel"></div>
              </div>
            </div>
            <div class="detalhe-lado-direito">
              <span class="pill pontos" id="detalhePontos"></span>
              <span class="badge-status aberto">Aberto (visual)</span>
            </div>
          </div>

          <p class="texto-suave" id="detalheDescricao"></p>

          <div class="chips-linha" id="detalheChips"></div>

          <div class="area-envio">
            <strong>Envio da prova (visual)</strong>
            <p>No app real, fotos e vÃ­deos seriam enviados aqui.</p>
            <div class="area-envio-botoes">
              <button class="btn btn-secundario">ğŸ“¸ Tirar foto</button>
              <button class="btn btn-secundario">ğŸ¥ Gravar vÃ­deo</button>
            </div>
          </div>

          <button class="btn btn-secundario btn-block" data-goto="desafios" style="margin-top: 10px;">
            â† Voltar
          </button>
        </div>
      </section>

      <!-- TELA RANKING -->
      <section id="screen-ranking" class="screen">
        <div class="titulo-section">
          <span>Ranking dos times</span>
          <small>Exemplo visual</small>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>ğŸ†</span>
              <div class="card-title">Top 4 (Simulado)</div>
            </div>
          </div>

          <div class="ranking-lista">
            <div class="item-ranking">
              <span class="posicao">ğŸ¥‡</span>
              <div class="item-ranking-avatar">ğŸ¾</div>
              <div class="item-ranking-nome">FamÃ­lia dos Pets</div>
              <div class="item-ranking-pontos">1.120 pts</div>
            </div>

            <div class="item-ranking voce">
              <span class="posicao">ğŸ¥ˆ</span>
              <div class="item-ranking-avatar">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
              <div class="item-ranking-nome">
                FamÃ­lia Barbosa
                <span class="pill-voce">VocÃª</span>
              </div>
              <div class="item-ranking-pontos">980 pts</div>
            </div>

            <div class="item-ranking">
              <span class="posicao">3</span>
              <div class="item-ranking-avatar">ğŸ®</div>
              <div class="item-ranking-nome">Time dos Gamers</div>
              <div class="item-ranking-pontos">840 pts</div>
            </div>

            <div class="item-ranking">
              <span class="posicao">4</span>
              <div class="item-ranking-avatar">ğŸŒˆ</div>
              <div class="item-ranking-nome">Galera do Bairro</div>
              <div class="item-ranking-pontos">730 pts</div>
            </div>
          </div>
        </div>
      </section>

      <!-- TELA PERFIL -->
      <section id="screen-perfil" class="screen">
        <div class="titulo-section">
          <span>Seu perfil</span>
          <small>Exemplo visual</small>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title-row">
              <span>ğŸ‘¤</span>
              <div>
                <div class="card-title" id="perfilNome">Jogador da Liga</div>
                <div class="card-subtitle">Participante da temporada</div>
              </div>
            </div>
          </div>

          <p class="texto-suave">
            Aqui podem aparecer histÃ³rico, conquistas, medalhas e temporadas jogadas.
          </p>

          <div class="chips-linha">
            <span class="chip">ğŸ… 12 desafios concluÃ­dos</span>
            <span class="chip">ğŸ”¥ 1 desafio Ã©pico</span>
            <span class="chip">ğŸ¥ 8 vÃ­deos enviados</span>
          </div>
        </div>

      </section>

    </main>

    <!-- NAVEGAÃ‡ÃƒO INFERIOR -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-target="dashboard">
        <span>ğŸ“Š</span>
        Painel
      </button>

      <button class="nav-btn" data-target="desafios">
        <span>ğŸ¯</span>
        Desafios
      </button>

      <button class="nav-btn" data-target="ranking">
        <span>ğŸ†</span>
        Ranking
      </button>

      <button class="nav-btn" data-target="perfil">
        <span>ğŸ‘¤</span>
        Perfil
      </button>
    </nav>

  </div>

  <link rel="stylesheet" href="styles.css" />
</body>

</html>
